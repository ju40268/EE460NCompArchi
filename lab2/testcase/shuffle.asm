.ORIG X3000
LEA R0, FIRSTADDR
LEA R1, MASKADDR
LEA R2, THREE
LEA R3, FOUR
LDW R0, R0, #0 ;R0 = 0x4000
LDW R1, R1, #0 ;R1 = 0x4004
INPUTDATA LEA R7, DATA
          LDB R7, R7, #0
	  STB R7, R0, #0
          LEA R7, DATA
	  LDB R7, R7, #2
	  STB R7, R0, #1
          LEA R7, DATA
	  LDB R7, R7, #4
	  STB R7, R0, #2
	  LEA R7, DATA
	  LDB R7, R7, #6
	  STB R7, R0, #3
	  LEA R7, MASK
	  LDB R7, R7, #0
	  STB R7, R0, #4

LDB R1, R1, #0
LDB R2, R2, #0
LDW R3, R3, #0
ADD R7, R0, #5

START ADD R3, R3, #-1
BRN DONE
AND R4, R1, R2
ADD R5, R0, R4
LDB R6, R5, #0
STB R6, R7, #0
ADD R7, R7, #1
RSHFL R1, R1, #2 
BR START
DONE HALT

FIRSTADDR .FILL X4000
MASKADDR  .FILL X4004
THREE	  .FILL X0003
FOUR     .FILL X0004
DATA 	 .FILL X00AA
	 .FILL X00BB
	 .FILL X00CC
	 .FILL X00DD
MASK 	 .FILL X00D2
.END
